<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Edit notifikasi</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-4">
  <h2>Edit Notifikasi</h2>
  <form action="/notifikasi_crud/edit/<%= data.id_notifikasi %>" method="POST">
    <div class="mb-3">
      <label>User</label>
      <select name="id_user" class="form-select" required>
        <% users.forEach(u => { %>
          <option value="<%= u.id %>" <%= u.id === data.id_user ? 'selected' : '' %>><%= u.username %></option>
        <% }) %>
      </select>
    </div>

    <div class="mb-3">
      <label>Pemesanan</label>
      <select name="id_pemesanan" class="form-select" required>
        <% pemesanan.forEach(p => { %>
          <option value="<%= p.id_pemesanan %>" <%= p.id_pemesanan === data.id_pemesanan ? 'selected' : '' %>>#<%= p.id_pemesanan %></option>
        <% }) %>
      </select>
    </div>
    <div class="mb-3">
      <label>Isi Pesan</label>
      <textarea name="isi_pesan" class="form-control" required><%= data.isi_pesan %></textarea>
    </div>

    <div class="mb-3">
      <label>Waktu Kirim</label>
      <%
        let waktu = new Date(data.waktu_kirim);
        let yyyy = waktu.getFullYear();
        let mm = String(waktu.getMonth() + 1).padStart(2, '0');
        let dd = String(waktu.getDate()).padStart(2, '0');
        let hh = String(waktu.getHours()).padStart(2, '0');
        let min = String(waktu.getMinutes()).padStart(2, '0');
        let waktuKirim = `${yyyy}-${mm}-${dd}T${hh}:${min}`;
      %>
      <input type="datetime-local" name="waktu_kirim" class="form-control" required value="<%= waktuKirim %>">
    </div>

    <div class="mb-3">
      <label>Status Baca</label>
      <select name="status_baca" class="form-select">
        <option value="belum" <%= data.status_baca === 'belum' ? 'selected' : '' %>>Belum</option>
        <option value="sudah" <%= data.status_baca === 'sudah' ? 'selected' : '' %>>Sudah</option>
      </select>
       </div>

    <button type="submit" class="btn btn-primary">Update</button>
    <a href="/pemesanan" class="btn btn-secondary">Kembali</a>
  </form>
</div>
</body>
</html>
